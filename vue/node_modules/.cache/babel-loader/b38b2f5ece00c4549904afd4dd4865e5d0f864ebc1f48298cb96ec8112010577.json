{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { login } from '/api/user';\nimport InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport TheLoading from '../components/LoadingProgress.vue';\nimport { mapState, mapActions } from 'vuex';\nimport Auth from \"../../api/utils/auth\";\nimport { RESPONSE_STATUS } from \"@/common/enums\";\nexport default {\n  components: {\n    Button,\n    InputText,\n    TheLoading\n  },\n  emits: [\"setLoggedUser\"],\n  data() {\n    return {\n      isShowPassword: false,\n      invalid: [],\n      loggedUser: false,\n      isLoading: false,\n      user: {\n        email: null,\n        password: null\n      }\n    };\n  },\n  methods: {\n    ...mapActions('user', ['saveUser']),\n    doLogin(event) {\n      event.preventDefault();\n      this.invalid = [];\n      if (this.user.email == null) {\n        this.invalid['email'] = 'Email không được để trống';\n      }\n      if (!this.validateemail()) {\n        this.invalid['email'] = 'Email không đúng định dạng';\n      }\n      if (this.user.password == null || String(this.user.password).trim() == '') {\n        this.invalid['password'] = 'Mật khẩu không được để trống';\n      }\n      //xảy ra lỗi\n      if (Object.keys(this.invalid).length > 0) return;\n      this.isLoading = true;\n      login(this.user).then(async res => {\n        try {\n          Auth.login(res.data.token, res.data.user);\n          this.$router.push({\n            path: '/departments'\n          });\n        } catch (error) {\n          console.log(error);\n        }\n        // Auth.login(res.access_token, res.user); //set local storage\n      }).catch(error => {\n        console.log(error);\n        if (error.response && error.response.status === RESPONSE_STATUS.HTTP_UNPROCESSABLE_ENTITY) {\n          this.invalid['error'] = error.response.data.data.errors;\n        }\n      }).finally(() => {\n        setTimeout(() => {\n          this.isLoading = false;\n        }, 750);\n      });\n    },\n    /**\r\n     * Validate email\r\n     */\n    validateemail() {\n      if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.user.email) && this.user.email != null && String(this.user.email).trim() != '') {\n        return true;\n      }\n      return false;\n    },\n    /**\r\n     * Không cho nhập khoảng trắng\r\n     * @param {*} event\r\n     */\n    validateSpace(event) {\n      if (event.keyCode === 32) {\n        event.preventDefault();\n      }\n    },\n    handleKeyDown(event) {\n      if (event.keyCode === 13) {\n        this.doLogin(event);\n      }\n    }\n  },\n  created() {\n    document.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeDestroy() {\n    document.removeEventListener('keydown', this.handleKeyDown);\n  },\n  beforeCreate() {}\n};","map":{"version":3,"names":["login","InputText","Button","TheLoading","mapState","mapActions","Auth","RESPONSE_STATUS","components","emits","data","isShowPassword","invalid","loggedUser","isLoading","user","email","password","methods","doLogin","event","preventDefault","validateemail","String","trim","Object","keys","length","then","res","token","$router","push","path","error","console","log","catch","response","status","HTTP_UNPROCESSABLE_ENTITY","errors","finally","setTimeout","test","validateSpace","keyCode","handleKeyDown","created","document","addEventListener","beforeDestroy","removeEventListener","beforeCreate"],"sources":["E:\\khoaluan\\w-score\\vue\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"bg-image position-relative\" v-if=\"!loggedUser\"></div>\r\n    <div class=\"box box-login flex-row\" v-if=\"!loggedUser\">\r\n        <div class=\"notification\">\r\n            <div class=\"toast-wrong-account flex-row\" v-if=\"invalid['error']\">\r\n                <div class=\"text-wrong-account\">Tên đăng nhập hoặc mật khẩu không đúng.</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"box-img-left\">\r\n            <img src=\"@public/assets/icons/welcome.png\" alt=\"\">\r\n        </div>\r\n        <div class=\"box-body flex-column\">\r\n            <div class=\"login-form\">\r\n                <div class=\"bg-title\">\r\n                    <img src=\"@public/assets/icons/logo-it.webp\" alt=\"\" class=\"title\">\r\n                </div>\r\n                <form action=\"\" @submit.prevent=\"doLogin\">\r\n                    <div class=\"content\">\r\n                        <div class=\"form-group validate-input\">\r\n                            <label class=\"top-label d-flex subtitle\" style=\"width:100%;\">\r\n                                <span style=\"font-weight: lighter\">Đăng nhập để làm việc với<b\r\n                                    style=\"margin-left: 5px\">Office\r\n                                        Garder</b>\r\n                                </span>\r\n                            </label>\r\n                            <div>\r\n                                <InputText v-model.trim=\"user.email\" class=\"form-control input\"\r\n                                           placeholder=\"Địa chỉ email\"\r\n                                           @keypress=\"validateSpace\"/>\r\n                            </div>\r\n                            <div class=\"error-text d-flex flex-start\" v-if=\"invalid['email']\">\r\n                                <span class=\"mi-icon24\"></span>\r\n                                <span style=\"padding-left: 2px;\" class=\"text-start\">{{ invalid['email'] }}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"form-group validate-input\">\r\n                            <div class=\"flex-column\">\r\n                                <label style=\"width:100%; padding-right: 0; position: relative\">\r\n                                    <InputText v-model=\"user.password\" :type=\"isShowPassword ? 'text' : 'password'\"\r\n                                               class=\"form-control input\" placeholder=\"Mật khẩu\"/>\r\n                                    <div id=\"togglepassword\" class=\"eye\" @click=\"isShowPassword = !isShowPassword\"\r\n                                         :class=\"{ 'eye-slash': isShowPassword }\"></div>\r\n                                </label>\r\n                                <div class=\" flex-row align-items-center\" v-if=\"invalid['password']\">\r\n                                    <div style=\"padding-top: 2px;\" class=\"icon-error-text\"></div>\r\n                                    <div style=\"padding-left: 2px; margin-top: 0;\" class=\"error-text\">{{\r\n                                            invalid['password']\r\n                                        }}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <Button type=\"submit\" label=\"Đăng nhập\"\r\n                                class=\"d-flex align-items-center btn btn-primary btn-login text\" @click=\"doLogin\"\r\n                                @keyup.enter=\"doLogin\"/>\r\n                    </div>\r\n                </form>\r\n                <div class=\"footer-login flex-center\">\r\n                    <button class=\"btn btn-link text\">Quên mật khẩu</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"copy-right\">\r\n            <div class=\"copy-right-text\">Copyright © 2023 - 2024 K70 CNTT</div>\r\n        </div>\r\n    </div>\r\n    <TheLoading v-if=\"isLoading\"/>\r\n</template>\r\n\r\n<script>\r\nimport {login} from '/api/user'\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport TheLoading from '../components/LoadingProgress.vue';\r\nimport {mapState, mapActions} from 'vuex'\r\nimport Auth from \"../../api/utils/auth\";\r\nimport {RESPONSE_STATUS} from \"@/common/enums\";\r\n\r\nexport default {\r\n    components: {\r\n        Button,\r\n        InputText,\r\n        TheLoading,\r\n    },\r\n    emits: [\"setLoggedUser\"],\r\n    data() {\r\n        return {\r\n            isShowPassword: false,\r\n\r\n            invalid: [],\r\n            loggedUser: false,\r\n            isLoading: false,\r\n            user: {\r\n                email: null,\r\n                password: null,\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions('user', ['saveUser']),\r\n\r\n        doLogin(event) {\r\n            event.preventDefault();\r\n            this.invalid = [];\r\n            if (this.user.email == null) {\r\n                this.invalid['email'] = 'Email không được để trống';\r\n            }\r\n\r\n            if (!this.validateemail()) {\r\n                this.invalid['email'] = 'Email không đúng định dạng';\r\n            }\r\n            if (this.user.password == null || String(this.user.password).trim() == '') {\r\n                this.invalid['password'] = 'Mật khẩu không được để trống';\r\n            }\r\n            //xảy ra lỗi\r\n            if (Object.keys(this.invalid).length > 0) return;\r\n\r\n            this.isLoading = true;\r\n            login(this.user).then(async res => {\r\n                try {\r\n                    Auth.login(res.data.token, res.data.user);\r\n                    this.$router.push({path: '/departments'});\r\n                } catch (error) {\r\n                    console.log(error)\r\n                }\r\n                // Auth.login(res.access_token, res.user); //set local storage\r\n            }).catch(error => {\r\n                console.log(error)\r\n                if (error.response && error.response.status === RESPONSE_STATUS.HTTP_UNPROCESSABLE_ENTITY) {\r\n                    this.invalid['error'] = error.response.data.data.errors;\r\n                }\r\n            }).finally(() => {\r\n                setTimeout(() => {\r\n                    this.isLoading = false;\r\n                }, 750);\r\n            })\r\n        },\r\n\r\n        /**\r\n         * Validate email\r\n         */\r\n        validateemail() {\r\n            if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(this.user.email) && this.user.email != null && String(this.user.email).trim() != '') {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Không cho nhập khoảng trắng\r\n         * @param {*} event\r\n         */\r\n        validateSpace(event) {\r\n            if (event.keyCode === 32) {\r\n                event.preventDefault();\r\n            }\r\n        },\r\n\r\n        handleKeyDown(event) {\r\n            if (event.keyCode === 13) {\r\n                this.doLogin(event);\r\n            }\r\n        }\r\n    },\r\n\r\n    created() {\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n    },\r\n\r\n    beforeDestroy() {\r\n        document.removeEventListener('keydown', this.handleKeyDown);\r\n    },\r\n    beforeCreate() {\r\n\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.bg-image {\r\n    background-image: url('@public/assets/icons/bg_login.webp');\r\n    height: 100%;\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n}\r\n\r\n.box.box-login {\r\n    display: flex;\r\n    height: 498px;\r\n    width: 768px;\r\n    background-color: #ffffff;\r\n    color: #888888;\r\n    border-radius: 14px;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    z-index: 2;\r\n    background: url('@public/assets/icons/bg.jpg') no-repeat;\r\n    background-size: cover;\r\n    background-position: center;\r\n    text-align: center;\r\n}\r\n\r\n.box.box-login .box-img-left img {\r\n    width: 80%;\r\n    height: auto;\r\n}\r\n\r\n.box.box-login .box-img-left {\r\n    width: 50%;\r\n    height: auto;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-top-left-radius: 14px;\r\n    border-bottom-left-radius: 15px;\r\n    background-size: cover;\r\n    background-position: center;\r\n}\r\n\r\n.box-body {\r\n    width: 50%;\r\n    height: auto;\r\n    padding: 57px 33px 12px 33px;\r\n    box-shadow: 0 0 0 rgb(0 0 0 / 8%);\r\n}\r\n\r\n.toast-wrong-account {\r\n    width: 345px;\r\n    height: 23px;\r\n    margin: 0;\r\n    top: -30px;\r\n    left: 50%;\r\n    background-color: #f65335;\r\n    position: absolute;\r\n    text-align: center;\r\n    color: white;\r\n    transform: translate(-50%, -50%);\r\n    align-items: center;\r\n    font-weight: 500;\r\n    border-radius: 5px;\r\n}\r\n\r\n.toast-wrong-account .text-wrong-account {\r\n    margin-left: 16px;\r\n}\r\n\r\n.box-body .title {\r\n    background-image: url('@public/assets/icons/logo-it.webp');\r\n    background-repeat: no-repeat;\r\n    height: 60px;\r\n    width: 60px;\r\n}\r\n\r\n.box-body .bg-title {\r\n    margin: 0px 0px 40px 0;\r\n}\r\n\r\n.btn-login:hover {\r\n    transition-duration: 0.4s;\r\n}\r\n\r\nlabel {\r\n    display: inline-block;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n.eye {\r\n    content: \"\";\r\n    float: right;\r\n    height: 24px;\r\n    width: 24px;\r\n    position: absolute;\r\n    background-image: url('@public/assets/icons/ic_view_eye.svg');\r\n    cursor: pointer;\r\n    right: 20px;\r\n    top: 8px;\r\n}\r\n\r\n.eye-slash {\r\n    content: \"\";\r\n    float: right;\r\n    height: 24px;\r\n    width: 24px;\r\n    position: absolute;\r\n    background-image: url('@public/assets/icons/ic_hide_eye.svg');\r\n    cursor: pointer;\r\n    right: 20px;\r\n    top: 8px;\r\n}\r\n\r\n.copy-right-text {\r\n    width: 345px !important;\r\n    height: 23px !important;\r\n    color: #666666 !important;\r\n    transform: translate(-50%, -50%) !important;\r\n    font-weight: lighter !important;\r\n    position: absolute;\r\n    margin: 0;\r\n    top: calc(100% + 25px);\r\n    left: 50%;\r\n}\r\n\r\n.footer-login {\r\n    margin-bottom: 0 !important;\r\n    margin-top: auto !important;\r\n}\r\n\r\n.form-group {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n.form-group label.top-label {\r\n    padding: 0;\r\n    color: #666;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.box-body .subtitle {\r\n    margin-bottom: 17px !important;\r\n    margin-left: 28px;\r\n    color: #202124 !important;\r\n}\r\n\r\n.form-control {\r\n    display: block;\r\n    width: 100%;\r\n    padding: 0.375rem 0.75rem;\r\n    font-size: 1rem;\r\n    font-weight: 400;\r\n    line-height: 1.5;\r\n    color: #495057;\r\n    background-color: #fff;\r\n    background-clip: padding-box;\r\n    border: 1px solid #ced4da;\r\n    border-radius: 0.25rem;\r\n    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;\r\n}\r\n\r\n.spinner-border-sm {\r\n    width: 1rem;\r\n    height: 1rem;\r\n    border-width: 0.2em;\r\n}\r\n\r\n.spinner-border {\r\n    display: inline-block;\r\n    width: 2rem;\r\n    height: 2rem;\r\n    vertical-align: text-bottom;\r\n    border: 0.25em solid currentColor;\r\n    border-right-color: transparent;\r\n    border-radius: 50%;\r\n    -webkit-animation: spinner-border .75s linear infinite;\r\n    animation: spinner-border .75s linear infinite;\r\n}\r\n\r\n.btn-login {\r\n    width: 100%;\r\n    height: 38px;\r\n    border-radius: 6px;\r\n    /* background-image: linear-gradient(to right, #fbc139, #ff5722); */\r\n    cursor: pointer;\r\n}\r\n\r\n.validate-input.input-error .input {\r\n    border: 1px solid #ff1d1d;\r\n}\r\n\r\n.form-control:focus {\r\n    color: #495057;\r\n    background-color: #fff;\r\n    border-color: #80bdff;\r\n    outline: 0;\r\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, .25);\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}