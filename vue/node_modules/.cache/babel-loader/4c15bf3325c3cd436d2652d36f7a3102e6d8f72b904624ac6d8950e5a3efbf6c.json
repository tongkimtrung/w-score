{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport store from '../../src/store';\nimport router from '@/router';\nimport Auth from \"./auth\";\nimport { RESPONSE_STATUS } from \"@/common/enums\";\nconst service = axios.create({\n  baseURL: \"http://localhost:9000/\",\n  // uri = baseURL + apiFunction truyền tới\n  timeout: 50000,\n  withCredentials: true,\n  headers: {\n    // Request Headers\n    'content-type': 'application/json',\n    'Accept': 'application/json'\n  }\n});\nservice.interceptors.request.use(config => {\n  if (Auth.check()) {\n    config.headers['Authorization'] = 'Bearer ' + Auth.getToken();\n  }\n  return config;\n}, error => {\n  console.log('error', error);\n});\nservice.interceptors.response.use(response => {\n  const res = response.data;\n  return res;\n}, error => {\n  console.log(error);\n  if (error.response) {\n    // lỗi đăng nhập thực hiện redirect về trang đăng nhập\n    if (error.request.status === RESPONSE_STATUS.HTTP_UNAUTHORIZED) {\n      Auth.logout();\n      router.push('/login');\n    } else if (error.request.status !== RESPONSE_STATUS.HTTP_UNPROCESSABLE_ENTITY) store.dispatch('handleServerError');\n  } else store.dispatch('handleServerError');\n  return Promise.reject(error);\n});\nexport default service;","map":{"version":3,"names":["axios","store","router","Auth","RESPONSE_STATUS","service","create","baseURL","timeout","withCredentials","headers","interceptors","request","use","config","check","getToken","error","console","log","response","res","data","status","HTTP_UNAUTHORIZED","logout","push","HTTP_UNPROCESSABLE_ENTITY","dispatch","Promise","reject"],"sources":["E:/khoaluan/w-score/vue/api/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport store from '../../src/store'\r\nimport router from '@/router'\r\nimport Auth from \"./auth\";\r\nimport {RESPONSE_STATUS} from \"@/common/enums\";\r\n\r\nconst service = axios.create({\r\n    baseURL: \"http://localhost:9000/\", // uri = baseURL + apiFunction truyền tới\r\n    timeout: 50000,\r\n    withCredentials: true,\r\n    headers: { // Request Headers\r\n        'content-type': 'application/json',\r\n        'Accept': 'application/json'\r\n    }\r\n})\r\n\r\nservice.interceptors.request.use(\r\n    config => {\r\n        if (Auth.check()) {\r\n            config.headers['Authorization'] = 'Bearer ' + Auth.getToken()\r\n        }\r\n        return config\r\n    },\r\n    error => {\r\n        console.log('error', error)\r\n    }\r\n)\r\n\r\nservice.interceptors.response.use(\r\n    response => {\r\n        const res = response.data\r\n        return res\r\n    },\r\n    error => {\r\n        console.log(error)\r\n        if (error.response) {\r\n            // lỗi đăng nhập thực hiện redirect về trang đăng nhập\r\n            if (error.request.status === RESPONSE_STATUS.HTTP_UNAUTHORIZED) {\r\n                Auth.logout();\r\n                router.push('/login')\r\n            } else if (error.request.status !== RESPONSE_STATUS.HTTP_UNPROCESSABLE_ENTITY)\r\n                store.dispatch('handleServerError');\r\n        }\r\n        else store.dispatch('handleServerError');\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default service\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,iBAAiB;AACnC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,IAAI,MAAM,QAAQ;AACzB,SAAQC,eAAe,QAAO,gBAAgB;AAE9C,MAAMC,OAAO,GAAGL,KAAK,CAACM,MAAM,CAAC;EACzBC,OAAO,EAAE,wBAAwB;EAAE;EACnCC,OAAO,EAAE,KAAK;EACdC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAE;IAAE;IACP,cAAc,EAAE,kBAAkB;IAClC,QAAQ,EAAE;EACd;AACJ,CAAC,CAAC;AAEFL,OAAO,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAC5BC,MAAM,IAAI;EACN,IAAIX,IAAI,CAACY,KAAK,CAAC,CAAC,EAAE;IACdD,MAAM,CAACJ,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGP,IAAI,CAACa,QAAQ,CAAC,CAAC;EACjE;EACA,OAAOF,MAAM;AACjB,CAAC,EACDG,KAAK,IAAI;EACLC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,KAAK,CAAC;AAC/B,CACJ,CAAC;AAEDZ,OAAO,CAACM,YAAY,CAACS,QAAQ,CAACP,GAAG,CAC7BO,QAAQ,IAAI;EACR,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAAI;EACzB,OAAOD,GAAG;AACd,CAAC,EACDJ,KAAK,IAAI;EACLC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EAClB,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAChB;IACA,IAAIH,KAAK,CAACL,OAAO,CAACW,MAAM,KAAKnB,eAAe,CAACoB,iBAAiB,EAAE;MAC5DrB,IAAI,CAACsB,MAAM,CAAC,CAAC;MACbvB,MAAM,CAACwB,IAAI,CAAC,QAAQ,CAAC;IACzB,CAAC,MAAM,IAAIT,KAAK,CAACL,OAAO,CAACW,MAAM,KAAKnB,eAAe,CAACuB,yBAAyB,EACzE1B,KAAK,CAAC2B,QAAQ,CAAC,mBAAmB,CAAC;EAC3C,CAAC,MACI3B,KAAK,CAAC2B,QAAQ,CAAC,mBAAmB,CAAC;EACxC,OAAOC,OAAO,CAACC,MAAM,CAACb,KAAK,CAAC;AAChC,CACJ,CAAC;AAED,eAAeZ,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}